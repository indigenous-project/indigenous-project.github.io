(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[21],{1156:function(e,t,n){"use strict";n.r(t);var r=n(619),c=n.n(r),s=n(620),o=n(156),i=n(1),a=n(621),u=n(622),l="Bearer "+localStorage.getItem("HDI-token"),d=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(u.a)("CommentsList"),{method:"GET",mode:"cors",headers:{Authorization:l,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(u.a)("CommentsEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:l,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),j=n(628),b=n.n(j),p=n(623),f=n(1133),x=n(29),O=function(e){return Object(x.jsx)(p.a,{content:f.a[e]})};t.default=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],u=Object(i.useState)({show:!1}),l=Object(o.a)(u,2),j=l[0],p=l[1],f=Object(i.useState)([]),m=Object(o.a)(f,2),g=m[0],w=m[1],y=Object(i.useState)(""),v=Object(o.a)(y,2),k=v[0],C=v[1],A=Object(i.useState)(!0),P=Object(o.a)(A,2),S=P[0],T=P[1],E=Object(i.useState)([]),L=Object(o.a)(E,2),N=L[0],D=L[1],I=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,d();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent.data,console.log(n),r(n),q(k,n),T(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e,t){e=e.toLowerCase();var r=(t||n).filter((function(t){return t.text.toLowerCase().includes(e)})).sort((function(e,t){return e.createdAt-t.createdAt})).reverse();w(r),C(e)},B=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,{isDeleted:"true"},D);case 2:if(!(n=e.sent).ok){e.next=9;break}return D([{title:"Congrats!",description:"The Comment with id: "+t+" has been successfuly deleted",type:"success"}]),e.next=7,I();case 7:e.next=10;break;case 9:D([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),p({show:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(s.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t,{isPublic:(!j.isPublic).toString()});case 2:if(!(n=e.sent).ok){e.next=9;break}return D([{title:"Congrats!",description:"The public status of Comment with id: "+t+" has been successfuly changed",type:"success"}]),e.next=7,I();case 7:e.next=10;break;case 9:D([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),p({show:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){I()}),[]);var J=[{name:Object(x.jsx)("strong",{children:"Text"}),selector:"text",sortable:!0,left:!0},{name:Object(x.jsx)("strong",{children:"Author"}),selector:"owner",sortable:!0,left:!0},{name:Object(x.jsx)("strong",{children:"Date"}),selector:"createdAt",sortable:!0,left:!0,cell:function(e){return e.createdAt.replace("T"," ").replace("Z","")}},{name:Object(x.jsx)("strong",{children:"Is Public"}),selector:"isPublic",sortable:!0,cell:function(e){return Object(x.jsx)(a.b,{color:e.isPublic?"success":"danger",className:"float-right",children:e.isPublic?"Yes":"No"})}},{name:"",selector:"_id",cell:function(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(a.L,{className:"card-header-action",onClick:function(){return p({id:e._id,text:e.text,isPublic:e.isPublic,show:!j.show,type:"isPublic"})},children:O("cilCloudUpload")}),Object(x.jsx)(a.L,{className:"card-header-action",onClick:function(){return p({id:e._id,text:e.text,show:!j.show,type:"delete"})},children:O("cilTrash")})]})}}];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(a.g,{children:Object(x.jsx)(a.h,{children:Object(x.jsx)(a.U,{children:Object(x.jsxs)(a.l,{sm:"12",children:[Object(x.jsx)(a.E,{type:"text",id:"searchText",placeholder:"search by keyword ...",onInput:function(e){return q(e.target.value)}}),Object(x.jsx)(b.a,{title:"Comments List",columns:J,data:g,highlightOnHover:!0,pagination:!0,progressPending:S})]})})})}),Object(x.jsxs)(a.O,{show:j.show,onClosed:function(){p({show:!1,type:j.type}),D([])},color:"delete"===j.type?"danger":"info",children:[Object(x.jsx)(a.R,{closeButton:!0,children:Object(x.jsx)(a.S,{children:"delete"===j.type?"Delete Comment":"Change public status of the comment"})}),Object(x.jsx)(a.P,{children:"delete"===j.type?Object(x.jsxs)("div",{children:["Are you sure you want to delete:",Object(x.jsx)("h4",{children:Object(x.jsxs)("strong",{children:['"',j.text,'"']})})]}):Object(x.jsxs)("div",{children:["Are you sure you want to change the public status of: ",Object(x.jsxs)("h4",{children:[Object(x.jsxs)("strong",{children:['"',j.text,'"']})," ?"]})]})}),Object(x.jsxs)(a.Q,{children:[Object(x.jsx)(a.f,{color:"delete"===j.type?"danger":"info",onClick:function(){"delete"===j.type?B(j.id):H(j.id)},children:"Yes"}),Object(x.jsx)(a.f,{color:"secondary",onClick:function(){return p({show:!1})},children:"Cancel"})]})]}),N.map((function(e){return Object(x.jsx)(a.lb,{position:"bottom-right",children:Object(x.jsxs)(a.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(x.jsx)(a.kb,{closeButton:!0,children:e.title}),Object(x.jsx)(a.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+N.id)}))]})}}}]);
//# sourceMappingURL=21.7b038444.chunk.js.map