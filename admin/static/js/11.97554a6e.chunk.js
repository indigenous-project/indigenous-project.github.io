(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[11],{1151:function(e,t,n){"use strict";n.r(t);var r=n(58),i=n(619),o=n.n(i),c=n(620),a=n(156),s=n(1),u=n(621),l=n(639),d=n(628),p=n.n(d),h=n(623),f=n(1133),b=n(624),j=n(626),m=n(627),g=n(29),v=function(e){var t=e.service,n=e.setService,i=e.setToastMessage,d=(e.toastMessages,e.loadServicesList),p=Object(s.useState)([]),h=Object(a.a)(p,2),f=h[0],j=h[1],v=Object(s.useState)(!1),O=Object(a.a)(v,2),y=O[0],x=O[1],w=Object(s.useState)(),C=Object(a.a)(w,2),k=C[0],S=C[1],E=function(){var e=Object(c.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),x(!0),r=function(){var e=Object(c.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n){e.next=7;break}return r={name:t.name,contact:{email:t.contact.email,phone:t.contact.phone},description:t.description,isPublic:t.isPublic?t.isPublic.toString():"true",isIndigenous:t.isIndigenous?t.isIndigenous.toString():"false",category:t.category},-2!==n&&(r.medias=[n]),e.next=5,Object(l.b)(t._id,r,i);case 5:e.sent.ok?(d(),i([{title:"Congrats!",description:"The information of service with id: "+t._id+" has been successfuly changed",type:"success"}])):i([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 7:x(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!k){e.next=8;break}return e.next=6,Object(m.b)(k,i,r);case 6:e.next=9;break;case 8:r(-2);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.d)();case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent.data,j(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){N()}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.g,{children:Object(g.jsx)(u.h,{children:Object(g.jsx)(u.U,{children:Object(g.jsxs)(u.l,{sm:"12",children:[Object(g.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"ID: "+t._id}),Object(g.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(g.jsx)(u.v,{action:"",method:"service",onSubmit:E,children:Object(g.jsx)(u.U,{children:Object(g.jsx)(u.l,{sm:"12",children:Object(g.jsxs)(u.g,{children:[Object(g.jsxs)(u.h,{children:[Object(g.jsxs)(u.w,{children:[Object(g.jsx)(u.K,{htmlFor:"name",children:"Service Name"}),Object(g.jsx)(u.E,{type:"text",id:"name",required:!0,placeholder:"Enter Name...",onInput:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{name:e.target.value}))},value:t.name,autoComplete:"name"})]}),Object(g.jsxs)(u.w,{row:!0,children:[Object(g.jsxs)(u.l,{sm:"4",children:[Object(g.jsx)(u.K,{htmlFor:"name",children:"Phone Number:"}),Object(g.jsx)(u.E,{type:"number",id:"phone",placeholder:"Enter phone number...",onInput:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{contact:Object(r.a)(Object(r.a)({},t.contact),{},{phone:e.target.value})}))},value:t.contact?t.contact.phone:"",autoComplete:"phone"})]}),Object(g.jsxs)(u.l,{sm:"4",children:[Object(g.jsx)(u.K,{htmlFor:"name",children:"Email:"}),Object(g.jsx)(u.E,{type:"email",id:"email",placeholder:"Enter email...",onInput:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{contact:Object(r.a)(Object(r.a)({},t.contact),{},{email:e.target.value})}))},value:t.contact?t.contact.email:"",autoComplete:"email"})]})]}),Object(g.jsxs)(u.w,{row:!0,children:[Object(g.jsx)(u.K,{col:!0,md:"2",htmlFor:"file-input",children:"Image/Video"}),Object(g.jsx)(u.l,{xs:"12",md:"9",className:"ml-n3 mt-1",children:Object(g.jsx)(u.F,{id:"file-input",name:"file-input",onChange:function(e){return S(e.target.files[0])}})})]}),Object(g.jsxs)(u.w,{children:[Object(g.jsx)(u.K,{htmlFor:"select",children:"Category"}),Object(g.jsx)(u.l,{xs:"12",md:"3",children:Object(g.jsx)(u.V,{custom:!0,name:"category",className:"ml-n3",id:"category",required:!0,onChange:function(e){n(Object(r.a)(Object(r.a)({},t),{},{category:e.target.value}))},value:t.category._id,children:f.filter((function(e){return"general"===e.type})).map((function(e){return Object(g.jsx)("option",{value:e._id,children:e.name},e._id)}))})})]}),Object(g.jsxs)(u.w,{row:!0,children:[Object(g.jsx)(u.l,{tag:"label",sm:"4",className:"col-form-label mr-n5",children:"I want this service to be visible:"}),Object(g.jsx)(u.l,{sm:"1",className:"ml-n5",children:Object(g.jsx)(u.gb,{onChange:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{isPublic:e.target.checked}))},className:"ml-n4 mt-1",color:"info",checked:!!t.isPublic})}),Object(g.jsx)(u.l,{tag:"label",sm:"3",className:"col-form-label mr-n4",children:"I this service Indigenous:"}),Object(g.jsx)(u.l,{sm:"1",className:"ml-n4",children:Object(g.jsx)(u.gb,{onChange:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{isIndigenous:e.target.checked}))},className:"ml-n4 mt-1",color:"info",checked:!!t.isIndigenous})})]}),Object(g.jsxs)(u.w,{children:[Object(g.jsx)(u.K,{htmlFor:"textarea-input",children:"Description"}),Object(g.jsx)(u.hb,{onInput:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{description:e.target.value}))},value:t.description})]})]}),Object(g.jsxs)(u.i,{className:"d-flex",children:[Object(g.jsx)(u.f,{type:"submit",size:"md",className:"btn btn-info",children:"Edit Service"})," ",Object(g.jsx)(u.L,{size:"sm",className:"btn btn-danger ml-2",children:"Cancel"}),y?Object(g.jsx)("div",{className:"w-25",children:Object(g.jsx)(u.eb,{className:"ml-2"})}):null]})]})})})})]})},O=function(e){var t=e.service;return console.log("service: ",t),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.g,{children:Object(g.jsx)(u.h,{children:Object(g.jsx)(u.U,{children:Object(g.jsxs)(u.l,{sm:"12",children:[Object(g.jsxs)("h4",{id:"traffic",className:"card-title mb-0",children:["ID: ",t._id]}),Object(g.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),t?Object(g.jsxs)(u.U,{children:[Object(g.jsx)(u.l,{sm:t.medias[0]?"6":"12",children:Object(g.jsxs)(u.M,{children:[Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Name: "}),t.name]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Phone: "}),t.contact?t.contact.phone:"No info"]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Email: "}),t.contact?t.contact.email:"No info"]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Category: "}),t.category.name]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Is this service visible for users: "}),Object(g.jsx)(u.b,{color:t.isPublic?"success":"danger",className:"ml-2 p-2",children:t.isPublic?"Yes":"No"})]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Is this service indigenous: "}),Object(g.jsx)(u.b,{color:t.isPublic?"success":"danger",className:"ml-2 p-2",children:t.isPublic?"Yes":"No"})]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Created At: "}),t.createdAt?t.createdAt.replace("T"," ").replace("Z",""):""]}),Object(g.jsxs)(u.N,{children:[Object(g.jsx)("strong",{children:"Last Update At: "}),t.updatedAt?t.updatedAt.replace("T"," ").replace("Z",""):""]})]})}),Object(g.jsx)(u.l,{sm:"6",children:t.medias[0]?Object(g.jsx)(u.D,{style:{maxHeight:"300px",maxWidth:"100%",marginTop:"10px"},src:t.medias[0].path}):null})]}):null,Object(g.jsxs)(u.g,{className:"mt-4",children:[Object(g.jsx)(u.k,{children:"Description:"}),Object(g.jsx)(u.h,{children:Object(g.jsx)(u.U,{children:Object(g.jsx)(u.l,{sm:"12",children:Object(g.jsx)(j.a,{apiKey:"1jrhxry4u21vyt133p3fetgz3s60eyigcj4zi629g6vczaia",initialValue:t.description,init:{height:300,menubar:!1,plugins:["advlist autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking table directionality","emoticons template paste textpattern imagetools codesample"],toolbar:""}})})})})]})]})},y=function(e){return Object(g.jsx)(h.a,{content:f.a[e]})};t.default=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),n=t[0],i=t[1],d=Object(s.useState)({show:!1}),h=Object(a.a)(d,2),f=h[0],b=h[1],j=Object(s.useState)([]),m=Object(a.a)(j,2),x=m[0],w=m[1],C=Object(s.useState)(""),k=Object(a.a)(C,2),S=k[0],E=k[1],N=Object(s.useState)(!0),A=Object(a.a)(N,2),I=A[0],P=A[1],T=Object(s.useState)([]),D=Object(a.a)(T,2),L=D[0],B=D[1],M=function(){var e=Object(c.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,Object(l.c)();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent.data,console.log(n),i(n),_(S,n),P(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e,t){e=e.toLowerCase();var r=(t||n).filter((function(t){return t.name.toLowerCase().includes(e)||t.owner.email.toLowerCase().includes(e)||t.createdAt.toLowerCase().includes(e)})).sort((function(e,t){return e.createdAt-t.createdAt})).reverse();w(r),E(e)},F=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)(t,{isDeleted:"true"},B);case 2:if(!(n=e.sent).ok){e.next=9;break}return B([{title:"Congrats!",description:"The Service with id: "+t+" has been successfuly deleted",type:"success"}]),e.next=7,M();case 7:e.next=10;break;case 9:B([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),b({show:!1,type:"delete"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(c.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)(t,{isPublic:!f.isPublic+""},B);case 2:if(!(n=e.sent).ok){e.next=9;break}return B([{title:"Congrats!",description:"The publicity status of Service with id: "+t+" has been successfuly changed",type:"success"}]),e.next=7,M();case 7:e.next=10;break;case 9:B([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),b({show:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){M()}),[]);var V=[{name:Object(g.jsx)("strong",{children:"Name"}),selector:"name",sortable:!0,left:!0},{name:Object(g.jsx)("strong",{children:"Category"}),selector:"category.name",sortable:!0,left:!0},{name:Object(g.jsx)("strong",{children:"Phone"}),selector:"contact.phone",sortable:!0,left:!0},{name:Object(g.jsx)("strong",{children:"Email"}),selector:"contact.email",sortable:!0,left:!0},{name:Object(g.jsx)("strong",{children:"Is Visible"}),selector:"isPublic",sortable:!0,center:!0,cell:function(e){return Object(g.jsx)(u.b,{color:e.isPublic?"success":"danger",className:"float-right",children:e.isPublic?"Yes":"No"})}},{name:"",selector:"_id",cell:function(e){return Object(g.jsxs)("div",{children:[Object(g.jsx)(u.L,{className:"card-header-action",onClick:function(){return b(Object(r.a)(Object(r.a)({},e),{},{show:!f.show,type:"detail"}))},children:y("cilInfo")}),Object(g.jsx)(u.L,{className:"card-header-action",onClick:function(){return b(Object(r.a)(Object(r.a)({},e),{},{show:!f.show,type:"edit"}))},children:y("cilPencil")}),Object(g.jsx)(u.L,{className:"card-header-action",onClick:function(){return b({id:e._id,name:e.name,isPublic:e.isPublic,show:!f.show,type:"isPublic"})},children:y("cilCloudUpload")}),Object(g.jsx)(u.L,{className:"card-header-action",onClick:function(){return b({id:e._id,name:e.name,show:!f.show,type:"delete"})},children:y("cilTrash")})]})}}];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(u.g,{children:Object(g.jsxs)(u.h,{children:[Object(g.jsx)(u.U,{children:Object(g.jsx)(u.l,{sm:"6"})}),Object(g.jsx)(u.U,{children:Object(g.jsxs)(u.l,{sm:"12",children:[Object(g.jsx)(u.E,{type:"text",id:"searchText",placeholder:"search by keyword ...",onInput:function(e){return _(e.target.value)}}),Object(g.jsx)(p.a,{title:"Services List",columns:V,data:x,highlightOnHover:!0,pagination:!0,progressPending:I})]})})]})}),Object(g.jsxs)(u.O,{show:f.show,onClosed:function(){b({show:!1,type:f.type}),B([])},color:"delete"===f.type?"danger":"isPublic"===f.type?"warning":"info",size:"edit"===f.type||"detail"===f.type?"xl":"",children:[Object(g.jsx)(u.R,{closeButton:!0,children:Object(g.jsx)(u.S,{children:"delete"===f.type?"Delete Service account":"edit"===f.type?"Edit Service profile":"detail"===f.type?"Service detail":"Change Publicity status"})}),f.show?Object(g.jsxs)(u.P,{children:["delete"===f.type?Object(g.jsxs)("div",{children:["Are you sure you want to delete ",Object(g.jsx)("strong",{children:f.name}),"?"]}):"isPublic"===f.type?Object(g.jsxs)("div",{children:["Are you sure you want to change publicity status of ",Object(g.jsx)("strong",{children:f.name}),"?"]}):null,"edit"===f.type?Object(g.jsx)(v,{loadServicesList:M,service:f,setService:b,setToastMessage:B,toastMessages:L}):"detail"===f.type?Object(g.jsx)(O,{service:f}):null]}):null,"delete"===f.type||"isPublic"===f.type?Object(g.jsxs)(u.Q,{children:[Object(g.jsx)(u.f,{color:"delete"===f.type?"danger":"warning",onClick:function(){return"delete"===f.type?F(f.id):z(f.id)},children:"Yes"}),Object(g.jsx)(u.f,{color:"secondary",onClick:function(){return b({show:!1})},children:"Cancel"})]}):null]}),L.map((function(e){return console.log(e),Object(g.jsx)(u.lb,{position:"bottom-right",children:Object(g.jsxs)(u.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(g.jsx)(u.kb,{closeButton:!0,children:e.title}),Object(g.jsx)(u.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+Math.floor(1e6*Math.random()))}))]})}},624:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));var r=n(619),i=n.n(r),o=n(620),c=n(622),a="Bearer "+localStorage.getItem("HDI-token"),s=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(c.a)("CategoriesList"),{method:"GET",mode:"cors",headers:{Authorization:a,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(c.a)("CategoriesEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:a,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(c.a)("CategoriesDelete")+"/"+t,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:a,Accept:"application/json"}}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(c.a)("CategoriesAdd"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:a,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},626:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(1),i=n(57),o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c={onActivate:i.func,onAddUndo:i.func,onBeforeAddUndo:i.func,onBeforeExecCommand:i.func,onBeforeGetContent:i.func,onBeforeRenderUI:i.func,onBeforeSetContent:i.func,onBeforePaste:i.func,onBlur:i.func,onChange:i.func,onClearUndos:i.func,onClick:i.func,onContextMenu:i.func,onCopy:i.func,onCut:i.func,onDblclick:i.func,onDeactivate:i.func,onDirty:i.func,onDrag:i.func,onDragDrop:i.func,onDragEnd:i.func,onDragGesture:i.func,onDragOver:i.func,onDrop:i.func,onExecCommand:i.func,onFocus:i.func,onFocusIn:i.func,onFocusOut:i.func,onGetContent:i.func,onHide:i.func,onInit:i.func,onKeyDown:i.func,onKeyPress:i.func,onKeyUp:i.func,onLoadContent:i.func,onMouseDown:i.func,onMouseEnter:i.func,onMouseLeave:i.func,onMouseMove:i.func,onMouseOut:i.func,onMouseOver:i.func,onMouseUp:i.func,onNodeChange:i.func,onObjectResizeStart:i.func,onObjectResized:i.func,onObjectSelected:i.func,onPaste:i.func,onPostProcess:i.func,onPostRender:i.func,onPreProcess:i.func,onProgressState:i.func,onRedo:i.func,onRemove:i.func,onReset:i.func,onSaveContent:i.func,onSelectionChange:i.func,onSetAttrib:i.func,onSetContent:i.func,onShow:i.func,onSubmit:i.func,onUndo:i.func,onVisualAid:i.func},a=o({apiKey:i.string,id:i.string,inline:i.bool,init:i.object,initialValue:i.string,onEditorChange:i.func,outputFormat:i.oneOf(["html","text"]),value:i.string,tagName:i.string,cloudChannel:i.string,plugins:i.oneOfType([i.string,i.array]),toolbar:i.oneOfType([i.string,i.array]),disabled:i.bool,textareaName:i.string,tinymceScriptSrc:i.string,scriptLoading:i.shape({async:i.bool,defer:i.bool,delay:i.number})},c),s=function(e){return"function"===typeof e},u=function(e){return e in c},l=function(e){return e.substr(2)},d=function(e,t,n,r,i){return function(e,t,n,r,i,o,c){var a=Object.keys(i).filter(u),s=Object.keys(o).filter(u),d=a.filter((function(e){return void 0===o[e]})),p=s.filter((function(e){return void 0===i[e]}));d.forEach((function(e){var t=l(e),r=c[t];n(t,r),delete c[t]})),p.forEach((function(n){var i=r(e,n),o=l(n);c[o]=i,t(o,i)}))}(i,e.on.bind(e),e.off.bind(e),(function(t,n){return function(r){var i;return null===(i=t(n))||void 0===i?void 0:i(r,e)}}),t,n,r)},p=0,h=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++p+String(t)},f=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},b=function(e){return"undefined"===typeof e||""===e?[]:Array.isArray(e)?e:e.split(" ")},j=function(){return{listeners:[],scriptId:h("tiny-script"),scriptLoading:!1,scriptLoaded:!1}},m=function(){var e=j();return{load:function(t,n,r,i,o,c){var a=function(){return function(e,t,n,r,i,o){var c=t.createElement("script");c.referrerPolicy="origin",c.type="application/javascript",c.id=e,c.src=n,c.async=r,c.defer=i,c.addEventListener("load",(function e(){c.removeEventListener("load",e),o()})),t.head&&t.head.appendChild(c)}(e.scriptId,t,n,r,i,(function(){e.listeners.forEach((function(e){return e()})),e.scriptLoaded=!0}))};e.scriptLoaded?c():(e.listeners.push(c),e.scriptLoading||(e.scriptLoading=!0,o>0?setTimeout(a,o):a()))},reinitialize:function(){e=j()}}}(),g=n(629),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},y=function(){var e,t,n;return(null===(n=null===(t=null===(e=Object(g.a)())||void 0===e?void 0:e.Env)||void 0===t?void 0:t.browser)||void 0===n?void 0:n.isIE())?"change keyup compositionend setcontent":"change input compositionend setcontent"},x=function(){return window.InputEvent&&"function"===typeof InputEvent.prototype.getTargetRanges?"beforeinput":"SelectionChange"},w=function(e){function t(t){var n,i,o,c=e.call(this,t)||this;return c.rollbackTimer=void 0,c.valueCursor=void 0,c.rollbackChange=function(){var e=c.editor,t=c.props.value;e&&t&&t!==c.currentContent&&e.undoManager.ignore((function(){if(e.setContent(t),c.valueCursor&&(!c.inline||e.hasFocus()))try{e.selection.moveToBookmark(c.valueCursor)}catch(n){}})),c.rollbackTimer=void 0},c.handleBeforeInput=function(e){var t;void 0!==c.props.value&&c.props.value===c.currentContent&&c.editor&&(c.valueCursor=null===(t=c.editor)||void 0===t?void 0:t.selection.getBookmark(3))},c.handleBeforeInputSpecial=function(e){"Enter"!==e.key&&"Backspace"!==e.key&&"Delete"!==e.key||c.handleBeforeInput(e)},c.handleEditorChange=function(e){var t=c.editor;if(t&&t.initialized){var n=t.getContent();if(void 0!==c.props.value&&c.props.value!==n&&(clearTimeout(c.rollbackTimer),c.rollbackTimer=window.setTimeout(c.rollbackChange,1)),n!==c.currentContent&&(c.currentContent=n,s(c.props.onEditorChange))){var r=c.props.outputFormat,i="html"===r?n:t.getContent({format:r});c.props.onEditorChange(i,t)}}},c.handleEditorChangeSpecial=function(e){"Backspace"!==e.key&&"Delete"!==e.key||c.handleEditorChange(e)},c.initialise=function(){var e=c.elementRef.current;if(e){var t=Object(g.a)();if(!t)throw new Error("tinymce should have been loaded into global scope");var n,r,i=O(O({},c.props.init),{selector:void 0,target:e,readonly:c.props.disabled,inline:c.inline,plugins:(n=c.props.init&&c.props.init.plugins,r=c.props.plugins,b(n).concat(b(r))),toolbar:c.props.toolbar||c.props.init&&c.props.init.toolbar,setup:function(t){c.editor=t,c.bindHandlers({}),c.inline&&!f(e)&&t.once("PostRender",(function(e){t.setContent(c.getInitialValue(),{no_events:!0})})),c.props.init&&s(c.props.init.setup)&&c.props.init.setup(t)},init_instance_callback:function(e){var t,n,r=c.getInitialValue();c.currentContent=null!==(t=c.currentContent)&&void 0!==t?t:e.getContent(),c.currentContent!==r&&(c.currentContent=r,e.setContent(r),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var i=null!==(n=c.props.disabled)&&void 0!==n&&n;e.setMode(i?"readonly":"design"),c.props.init&&s(c.props.init.init_instance_callback)&&c.props.init.init_instance_callback(e)}});c.inline||(e.style.visibility=""),f(e)&&(e.value=c.getInitialValue()),t.init(i)}},c.id=c.props.id||h("tiny-react"),c.elementRef=r.createRef(),c.inline=null!==(o=null!==(n=c.props.inline)&&void 0!==n?n:null===(i=c.props.init)||void 0===i?void 0:i.inline)&&void 0!==o&&o,c.boundHandlers={},c}return v(t,e),t.prototype.componentDidUpdate=function(e){var t,n,r=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"===typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"===typeof this.props.value&&this.props.value!==this.currentContent){var i=this.editor;i.undoManager.transact((function(){var e;if(!r.inline||i.hasFocus())try{e=i.selection.getBookmark(3)}catch(a){}var t=r.valueCursor;if(i.setContent(r.props.value),!r.inline||i.hasFocus())for(var n=0,o=[e,t];n<o.length;n++){var c=o[n];if(c)try{i.selection.moveToBookmark(c),r.valueCursor=c;break}catch(a){}}}))}if(this.props.disabled!==e.disabled){var o=null!==(n=this.props.disabled)&&void 0!==n&&n;this.editor.setMode(o?"readonly":"design")}}},t.prototype.componentDidMount=function(){var e,t,n,r,i,o;null!==Object(g.a)()?this.initialise():this.elementRef.current&&this.elementRef.current.ownerDocument&&m.load(this.elementRef.current.ownerDocument,this.getScriptSrc(),null!==(t=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async)&&void 0!==t&&t,null!==(r=null===(n=this.props.scriptLoading)||void 0===n?void 0:n.defer)&&void 0!==r&&r,null!==(o=null===(i=this.props.scriptLoading)||void 0===i?void 0:i.delay)&&void 0!==o?o:0,this.initialise)},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(y(),this.handleEditorChange),t.off(x(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach((function(n){t.off(n,e.boundHandlers[n])})),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.renderInline=function(){var e=this.props.tagName,t=void 0===e?"div":e;return r.createElement(t,{ref:this.elementRef,id:this.id})},t.prototype.renderIframe=function(){return r.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id})},t.prototype.getScriptSrc=function(){if("string"===typeof this.props.tinymceScriptSrc)return this.props.tinymceScriptSrc;var e=this.props.cloudChannel;return"https://cdn.tiny.cloud/1/"+(this.props.apiKey?this.props.apiKey:"no-api-key")+"/tinymce/"+e+"/tinymce.min.js"},t.prototype.getInitialValue=function(){return"string"===typeof this.props.initialValue?this.props.initialValue:"string"===typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){d(this.editor,e,this.props,this.boundHandlers,(function(e){return t.props[e]}));var n=function(e){return void 0!==e.onEditorChange||void 0!==e.value},r=n(e),i=n(this.props);!r&&i?(this.editor.on(y(),this.handleEditorChange),this.editor.on(x(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):r&&!i&&(this.editor.off(y(),this.handleEditorChange),this.editor.off(x(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=a,t.defaultProps={cloudChannel:"5"},t}(r.Component)},627:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return h}));var r=n(619),i=n.n(r),o=n(620),c=n(622),a=n(632),s="indigenous-images",u=new(n.n(a).a.S3)({accessKeyId:"AKIAWBK3UNFZVVF7OF4B",secretAccessKey:"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"}),l="Bearer "+localStorage.getItem("HDI-token"),d=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(c.a)("MediasAdd"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:l,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c={Bucket:s,Key:Math.floor(1e10*Math.random()).toString(),Body:t,ContentType:"image/jpeg",ACL:"public-read-write"},u.upload(c,function(){var e=Object(o.a)(i.a.mark((function e(o,c){var a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o&&n([{title:"Error!",description:"An error occured while processing the request: "+o,type:"danger"}]),console.log("File uploaded successfully.",c),e.next=4,d({type:"image",extension:"."+t.name.split(".")[1],path:c.Location},n);case 4:if(!(a=e.sent).ok){e.next=13;break}return e.next=8,a.json();case 8:return s=e.sent,e.next=11,r(s.data._id);case 11:e.next=16;break;case 13:return e.next=15,r(-1);case 15:n([{title:"Error!",description:"An error occured while processing the request: "+o,type:"danger"}]);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],t.forEach((function(e){var t={Bucket:s,Key:Math.floor(1e10*Math.random()).toString(),Body:e.content,ContentType:"image/jpeg",ACL:"public-read-write"};c.push({type:e.type,promise:u.upload(t).promise()})})),Promise.all(c.map((function(e){return e.promise}))).then(function(){var e=Object(o.a)(i.a.mark((function e(o){var c,a,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],a=0;case 2:if(!(a<o.length)){e.next=23;break}if(console.log("File uploaded successfully.",o[a]),"icon"===t[a].type){e.next=19;break}return e.next=7,d({type:"image",extension:".jpg",path:o[a].Location},n);case 7:if(!(s=e.sent).ok){e.next=15;break}return e.next=11,s.json();case 11:u=e.sent,c.push(u.data._id),e.next=17;break;case 15:return n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]),e.abrupt("return");case 17:e.next=20;break;case 19:c.push(o[a].Location);case 20:a++,e.next=2;break;case 23:return e.next=25,r(c);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},629:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=function(){return"undefined"!==typeof window?window:e},i=function(){var e=r();return e&&e.tinymce?e.tinymce:null}}).call(this,n(83))},630:function(e,t){},639:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var r=n(619),i=n.n(r),o=n(620),c=n(622),a="Bearer "+localStorage.getItem("HDI-token"),s=function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(c.a)("ServicesAdd"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:a,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(c.a)("ServicesList"),{method:"GET",mode:"cors",headers:{Authorization:a,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.a)(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(c.a)("ServicesEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:a,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=11.97554a6e.chunk.js.map