(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[19],{1141:function(e,t,n){"use strict";n.r(t);var r=n(58),c=n(619),a=n.n(c),i=n(620),s=n(156),o=n(1),l=n(621),u=n(640),d=n(29);t.default=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],j=Object(o.useState)(!1),b=Object(s.a)(j,2),h=b[0],p=b[1],O=Object(o.useState)([]),m=Object(s.a)(O,2),f=m[0],x=m[1],g=function(){var e=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c(!0),n={title:h.title,link:h.link,startDate:h.startDate,endDate:h.endDate,isPublic:h.isPublic?h.isPublic.toString():"true"},console.log("addObject",n),e.next=6,Object(u.a)(n);case 6:e.sent.ok?x([{title:"Congrats!",description:"The "+h.title+" poll has been successfuly created",type:"success"}]):x([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]),c(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.g,{children:Object(d.jsx)(l.h,{children:Object(d.jsx)(l.U,{children:Object(d.jsxs)(l.l,{sm:"12",children:[Object(d.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Add new poll"}),Object(d.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(d.jsx)(l.v,{action:"",method:"poll",onSubmit:g,children:Object(d.jsx)(l.U,{children:Object(d.jsx)(l.l,{sm:"12",children:Object(d.jsxs)(l.g,{children:[Object(d.jsxs)(l.h,{children:[Object(d.jsxs)(l.w,{children:[Object(d.jsx)(l.K,{htmlFor:"name",children:"Poll Title"}),Object(d.jsx)(l.E,{type:"text",id:"name",required:!0,placeholder:"Enter Name...",onInput:function(e){return p(Object(r.a)(Object(r.a)({},h),{},{title:e.target.value}))},autoComplete:"title"})]}),Object(d.jsxs)(l.w,{children:[Object(d.jsx)(l.K,{htmlFor:"link",children:"Poll Link"}),Object(d.jsx)(l.E,{type:"text",id:"link",required:!0,placeholder:"Enter Link...",onInput:function(e){return p(Object(r.a)(Object(r.a)({},h),{},{link:e.target.value}))},autoComplete:"link"})]}),Object(d.jsxs)(l.w,{row:!0,children:[Object(d.jsxs)(l.l,{sm:"6",children:[Object(d.jsx)(l.K,{htmlFor:"startDate",children:"Start Date"}),Object(d.jsx)(l.E,{type:"date",min:(new Date).toISOString().split("T")[0],id:"startDate",required:!0,placeholder:"Enter start date...",onChange:function(e){return p(Object(r.a)(Object(r.a)({},h),{},{startDate:e.target.value}))}})]}),Object(d.jsxs)(l.l,{sm:"6",children:[Object(d.jsx)(l.K,{htmlFor:"endDate",children:"End Date"}),Object(d.jsx)(l.E,{type:"date",min:(new Date).toISOString().split("T")[0],id:"endDate",required:!0,placeholder:"Enter end date...",onChange:function(e){return p(Object(r.a)(Object(r.a)({},h),{},{endDate:e.target.value}))}})]})]}),Object(d.jsxs)(l.w,{row:!0,children:[Object(d.jsx)(l.l,{tag:"label",sm:"2",className:"col-form-label",children:"I want to publish this poll:"}),Object(d.jsx)(l.l,{sm:"1",children:Object(d.jsx)(l.gb,{onChange:function(e){return p(Object(r.a)(Object(r.a)({},h),{},{isPublic:e.target.checked}))},className:"ml-n4 mt-1",color:"info",defaultChecked:!0})})]})]}),Object(d.jsxs)(l.i,{className:"d-flex",children:[Object(d.jsx)(l.f,{type:"submit",size:"md",className:"btn btn-info",children:"Add Poll"})," ",Object(d.jsx)(l.L,{size:"sm",className:"btn btn-danger ml-2",children:"Cancel"}),n?Object(d.jsx)("div",{className:"w-25",children:Object(d.jsx)(l.eb,{className:"ml-2"})}):null]})]})})})}),f.map((function(e){return Object(d.jsx)(l.lb,{position:"bottom-right",children:Object(d.jsxs)(l.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(d.jsx)(l.kb,{closeButton:!0,children:e.title}),Object(d.jsx)(l.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+f.id)}))]})}},640:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return o}));var r=n(619),c=n.n(r),a=n(620),i=n(622),s="Bearer "+localStorage.getItem("HDI-token"),o=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(i.a)("PollsAdd"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:s,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(i.a)("PollsList"),{method:"GET",mode:"cors",headers:{Authorization:s,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(i.a)("PollsEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:s,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=19.b449ee81.chunk.js.map