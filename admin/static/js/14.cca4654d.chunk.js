(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[14],{1140:function(e,t,n){"use strict";n.r(t);var r=n(58),c=n(619),a=n.n(c),o=n(620),i=n(156),s=n(1),u=n(621),l=n(639),p=n(627),d=n(624),h=n(29);t.default=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],j=Object(s.useState)(),b=Object(i.a)(j,2),f=b[0],m=b[1],O=Object(s.useState)(!1),g=Object(i.a)(O,2),x=g[0],y=g[1],v=Object(s.useState)(!1),w=Object(i.a)(v,2),k=w[0],A=w[1],C=Object(s.useState)([]),S=Object(i.a)(C,2),E=S[0],N=S[1],I=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)();case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent.data,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.medias=[],t.preventDefault(),y(!0),n=function(){var e=Object(o.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===t){e.next=7;break}return n={name:k.name,contact:{email:k.contact.email,phone:k.contact.phone},description:k.description,category:k.category,isPublic:k.isPublic?k.isPublic.toString():"true",isIndigenous:k.isIndigenous?k.isIndigenous.toString():"false",medias:[t]},console.log("addObject",n),e.next=5,Object(l.a)(n);case 5:e.sent.ok?N([{title:"Congrats!",description:"The "+k.name+" service has been successfuly created",type:"success"}]):N([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 7:y(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,Object(p.b)(f,N,n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){I()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(u.g,{children:Object(h.jsx)(u.h,{children:Object(h.jsx)(u.U,{children:Object(h.jsxs)(u.l,{sm:"12",children:[Object(h.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Add new service"}),Object(h.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(h.jsx)(u.v,{action:"",method:"service",onSubmit:T,children:Object(h.jsx)(u.U,{children:Object(h.jsx)(u.l,{sm:"12",children:Object(h.jsxs)(u.g,{children:[Object(h.jsxs)(u.h,{children:[Object(h.jsxs)(u.w,{children:[Object(h.jsx)(u.K,{htmlFor:"name",children:"Service Name"}),Object(h.jsx)(u.E,{type:"text",id:"name",required:!0,placeholder:"Enter Name...",onInput:function(e){return A(Object(r.a)(Object(r.a)({},k),{},{name:e.target.value}))},autoComplete:"name"})]}),Object(h.jsxs)(u.w,{row:!0,children:[Object(h.jsxs)(u.l,{sm:"4",children:[Object(h.jsx)(u.K,{htmlFor:"name",children:"Phone Number:"}),Object(h.jsx)(u.E,{type:"number",id:"phone",placeholder:"Enter phone number...",onInput:function(e){return A(Object(r.a)(Object(r.a)({},k),{},{contact:Object(r.a)(Object(r.a)({},k.contact),{},{phone:e.target.value})}))},autoComplete:"phone"})]}),Object(h.jsxs)(u.l,{sm:"4",children:[Object(h.jsx)(u.K,{htmlFor:"name",children:"Email:"}),Object(h.jsx)(u.E,{type:"email",id:"email",placeholder:"Enter email...",onInput:function(e){return A(Object(r.a)(Object(r.a)({},k),{},{contact:Object(r.a)(Object(r.a)({},k.contact),{},{email:e.target.value})}))},autoComplete:"email"})]})]}),Object(h.jsxs)(u.w,{row:!0,children:[Object(h.jsx)(u.K,{col:!0,md:"1",htmlFor:"file-input",children:"Image/Video"}),Object(h.jsx)(u.l,{xs:"12",md:"9",className:"ml-n3 mt-1",children:Object(h.jsx)(u.F,{id:"file-input",required:!0,name:"file-input",onChange:function(e){return m(e.target.files[0])}})})]}),Object(h.jsxs)(u.w,{children:[Object(h.jsx)(u.K,{htmlFor:"select",children:"Category"}),Object(h.jsx)(u.l,{xs:"12",md:"3",children:Object(h.jsx)(u.V,{custom:!0,name:"category",className:"ml-n3",id:"category",required:!0,onChange:function(e){A(Object(r.a)(Object(r.a)({},k),{},{category:e.target.value}))},children:n.filter((function(e){return"general"===e.type})).map((function(e){return Object(h.jsx)("option",{value:e._id,children:e.name},e._id)}))})})]}),Object(h.jsxs)(u.w,{row:!0,children:[Object(h.jsx)(u.l,{tag:"label",sm:"3",className:"col-form-label mr-n5",children:"I want this service to be visible:"}),Object(h.jsx)(u.l,{sm:"1",className:"ml-n5",children:Object(h.jsx)(u.gb,{onChange:function(e){return A(Object(r.a)(Object(r.a)({},k),{},{isPublic:e.target.checked}))},className:"ml-n4 mt-1",color:"info",defaultChecked:!0})}),Object(h.jsx)(u.l,{tag:"label",sm:"2",className:"col-form-label",children:"I this service Indigenous:"}),Object(h.jsx)(u.l,{sm:"1",className:"ml-n4",children:Object(h.jsx)(u.gb,{onChange:function(e){return A(Object(r.a)(Object(r.a)({},k),{},{isIndigenous:e.target.checked}))},className:"ml-n4 mt-1",color:"info"})})]}),Object(h.jsxs)(u.w,{children:[Object(h.jsx)(u.K,{htmlFor:"textarea-input",children:"Description"}),Object(h.jsx)(u.hb,{onInput:function(e){return A(Object(r.a)(Object(r.a)({},k),{},{description:e.target.value}))}})]})]}),Object(h.jsxs)(u.i,{className:"d-flex",children:[Object(h.jsx)(u.f,{type:"submit",size:"md",className:"btn btn-info",children:"Add Service"})," ",Object(h.jsx)(u.L,{size:"sm",className:"btn btn-danger ml-2",children:"Cancel"}),x?Object(h.jsx)("div",{className:"w-25",children:Object(h.jsx)(u.eb,{className:"ml-2"})}):null]})]})})})}),E.map((function(e){return Object(h.jsx)(u.lb,{position:"bottom-right",children:Object(h.jsxs)(u.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(h.jsx)(u.kb,{closeButton:!0,children:e.title}),Object(h.jsx)(u.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+E.id)}))]})}},624:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return l}));var r=n(619),c=n.n(r),a=n(620),o=n(622),i="Bearer "+localStorage.getItem("HDI-token"),s=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(o.a)("CategoriesList"),{method:"GET",mode:"cors",headers:{Authorization:i,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(o.a)("CategoriesEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:i,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(o.a)("CategoriesDelete")+"/"+t,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:i,Accept:"application/json"}}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(o.a)("CategoriesAdd"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:i,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},627:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return h}));var r=n(619),c=n.n(r),a=n(620),o=n(622),i=n(632),s="indigenous-images",u=new(n.n(i).a.S3)({accessKeyId:"AKIAWBK3UNFZVVF7OF4B",secretAccessKey:"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"}),l="Bearer "+localStorage.getItem("HDI-token"),p=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(o.a)("MediasAdd"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:l,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={Bucket:s,Key:Math.floor(1e10*Math.random()).toString(),Body:t,ContentType:"image/jpeg",ACL:"public-read-write"},u.upload(o,function(){var e=Object(a.a)(c.a.mark((function e(a,o){var i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a&&n([{title:"Error!",description:"An error occured while processing the request: "+a,type:"danger"}]),console.log("File uploaded successfully.",o),e.next=4,p({type:"image",extension:"."+t.name.split(".")[1],path:o.Location},n);case 4:if(!(i=e.sent).ok){e.next=13;break}return e.next=8,i.json();case 8:return s=e.sent,e.next=11,r(s.data._id);case 11:e.next=16;break;case 13:return e.next=15,r(-1);case 15:n([{title:"Error!",description:"An error occured while processing the request: "+a,type:"danger"}]);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),h=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],t.forEach((function(e){var t={Bucket:s,Key:Math.floor(1e10*Math.random()).toString(),Body:e.content,ContentType:"image/jpeg",ACL:"public-read-write"};o.push({type:e.type,promise:u.upload(t).promise()})})),Promise.all(o.map((function(e){return e.promise}))).then(function(){var e=Object(a.a)(c.a.mark((function e(a){var o,i,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=0;case 2:if(!(i<a.length)){e.next=23;break}if(console.log("File uploaded successfully.",a[i]),"icon"===t[i].type){e.next=19;break}return e.next=7,p({type:"image",extension:".jpg",path:a[i].Location},n);case 7:if(!(s=e.sent).ok){e.next=15;break}return e.next=11,s.json();case 11:u=e.sent,o.push(u.data._id),e.next=17;break;case 15:return n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]),e.abrupt("return");case 17:e.next=20;break;case 19:o.push(a[i].Location);case 20:i++,e.next=2;break;case 23:return e.next=25,r(o);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},630:function(e,t){},639:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var r=n(619),c=n.n(r),a=n(620),o=n(622),i="Bearer "+localStorage.getItem("HDI-token"),s=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(o.a)("ServicesAdd"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:i,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(o.a)("ServicesList"),{method:"GET",mode:"cors",headers:{Authorization:i,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(o.a)("ServicesEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:i,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=14.cca4654d.chunk.js.map