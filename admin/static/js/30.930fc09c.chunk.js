(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[30],{1136:function(e,t,n){"use strict";n.r(t);var c=n(58),i=n(619),r=n.n(i),a=n(620),s=n(156),l=n(1),o=n(621),j=n(646),d=n(627),u=n(624),b=n(626),h=n(29);t.default=function(){var e=Object(l.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1],m=Object(l.useState)(),O=Object(s.a)(m,2),p=O[0],f=O[1],x=Object(l.useState)(!1),g=Object(s.a)(x,2),v=g[0],w=g[1],y=Object(l.useState)(!1),k=Object(s.a)(y,2),N=k[0],C=k[1],S=Object(l.useState)([]),z=Object(s.a)(S,2),F=z[0],P=z[1],E=function(e){if(!e)return"";for(var t=[],n=e.length-1;n>=0;n--)t.unshift(["&#",e[n].charCodeAt(),";"].join(""));return t.join("")},K=function(){var e=Object(a.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.d)();case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent.data,i(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.medias=[],t.preventDefault(),w(!0),n=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===t){e.next=7;break}return n={title:N.title,description:E(N.description),category:N.category,isPublic:N.isPublic?N.isPublic.toString():"true",medias:[t]},console.log("addObject",n),e.next=5,Object(j.a)(n);case 5:e.sent.ok?P([{title:"Congrats!",description:"The "+N.title+" post has been successfuly created",type:"success"}]):P([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 7:w(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,Object(d.b)(p,P,n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){K()}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(o.g,{children:Object(h.jsx)(o.h,{children:Object(h.jsx)(o.U,{children:Object(h.jsxs)(o.l,{sm:"12",children:[Object(h.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Add new post"}),Object(h.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(h.jsx)(o.v,{action:"",method:"post",onSubmit:A,children:Object(h.jsx)(o.U,{children:Object(h.jsx)(o.l,{sm:"12",children:Object(h.jsxs)(o.g,{children:[Object(h.jsxs)(o.h,{children:[Object(h.jsxs)(o.w,{children:[Object(h.jsx)(o.K,{htmlFor:"name",children:"Post Title"}),Object(h.jsx)(o.E,{type:"text",id:"name",required:!0,placeholder:"Enter Name..",onInput:function(e){return C(Object(c.a)(Object(c.a)({},N),{},{title:e.target.value}))},autoComplete:"name"})]}),Object(h.jsxs)(o.w,{row:!0,children:[Object(h.jsx)(o.K,{col:!0,md:"1",htmlFor:"file-input",children:"Image/Video"}),Object(h.jsx)(o.l,{xs:"12",md:"9",className:"ml-n3 mt-1",children:Object(h.jsx)(o.F,{id:"file-input",name:"file-input",onChange:function(e){return f(e.target.files[0])}})})]}),Object(h.jsxs)(o.w,{children:[Object(h.jsx)(o.K,{htmlFor:"select",children:"Category"}),Object(h.jsx)(o.l,{xs:"12",md:"3",children:Object(h.jsx)(o.V,{custom:!0,name:"category",className:"ml-n3",id:"category",required:!0,onChange:function(e){C(Object(c.a)(Object(c.a)({},N),{},{category:e.target.value}))},children:n.filter((function(e){return"general"===e.type})).map((function(e){return Object(h.jsx)("option",{value:e._id,children:e.name},e._id)}))})})]}),Object(h.jsxs)(o.w,{row:!0,children:[Object(h.jsx)(o.l,{tag:"label",sm:"2",className:"col-form-label",children:"I want to publish this post:"}),Object(h.jsx)(o.l,{sm:"1",children:Object(h.jsx)(o.gb,{onChange:function(e){return C(Object(c.a)(Object(c.a)({},N),{},{isPublic:e.target.checked}))},className:"ml-n4 mt-1",color:"info",defaultChecked:!0})})]}),Object(h.jsxs)(o.w,{children:[Object(h.jsx)(o.K,{htmlFor:"textarea-input",children:"Description"}),Object(h.jsx)(b.a,{apiKey:"1jrhxry4u21vyt133p3fetgz3s60eyigcj4zi629g6vczaia",initialValue:"",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking table directionality","emoticons template paste textpattern imagetools codesample"],toolbar:"bold italic sizeselect fontselect fontsizeselect | hr alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | insertfile undo redo | forecolor backcolor emoticons | "},onEditorChange:function(e,t){C(Object(c.a)(Object(c.a)({},N),{},{description:e}))}})]})]}),Object(h.jsxs)(o.i,{className:"d-flex",children:[Object(h.jsx)(o.f,{type:"submit",size:"md",className:"btn btn-info",children:"Add Post"})," ",Object(h.jsx)(o.L,{size:"sm",className:"btn btn-danger ml-2",children:"Cancel"}),v?Object(h.jsx)("div",{className:"w-25",children:Object(h.jsx)(o.eb,{className:"ml-2"})}):null]})]})})})}),F.map((function(e){return Object(h.jsx)(o.lb,{position:"bottom-right",children:Object(h.jsxs)(o.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(h.jsx)(o.kb,{closeButton:!0,children:e.title}),Object(h.jsx)(o.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+F.id)}))]})}}}]);
//# sourceMappingURL=30.930fc09c.chunk.js.map