(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[28],{1139:function(e,t,n){"use strict";n.r(t);var a=n(58),c=n(619),r=n.n(c),s=n(620),o=n(156),i=n(1),l=n(621),j=n(655),u=n(627),d=n(624),b=n(626),h=n(682),O=n.n(h),m=n(29);O.a.setApiKey("AIzaSyASXJAnvrEDFYxlqDRwtHCe8bW69_TV7RE");t.default=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],h=Object(i.useState)(),p=Object(o.a)(h,2),x=p[0],y=p[1],f=Object(i.useState)(),g=Object(o.a)(f,2),w=g[0],v=g[1],E=Object(i.useState)(!1),C=Object(o.a)(E,2),H=C[0],I=C[1],N=Object(i.useState)(!1),F=Object(o.a)(N,2),k=F[0],K=F[1],z=Object(i.useState)([]),A=Object(o.a)(z,2),S=A[0],q=A[1],D=function(e){if(!e)return"";for(var t=[],n=e.length-1;n>=0;n--)t.unshift(["&#",e[n].charCodeAt(),";"].join(""));return t.join("")},P=function(){var e=Object(s.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)();case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent.data,c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(s.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.medias=[],t.preventDefault(),I(!0),a=function(){var e=Object(s.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.fromAddress(k.contact.address).then((function(e){var t=e.results[0].geometry.location,n=t.lat,a=t.lng;k.lat=n,k.lng=a,console.log(n,a)}),(function(e){console.error(e)}));case 2:if(2!==t.length){e.next=9;break}return a={name:k.name,coords:{lat:k.lat,long:k.lng},contact:{email:k.contact.email,phone:k.contact.phone,website:k.contact.website,address:k.contact.address},description:D(k.description),category:k.category?k.category:n[0]._id,isPublic:k.isPublic?k.isPublic.toString():"true",isIndigenous:k.isIndigenous?k.isIndigenous.toString():"false",medias:[t[0]],isAvailable:k.isAvailable?k.isAvailable.toString():"false",icon:t[1],openHours:{monday:k.openHours.monday,tuesday:k.openHours.tuesday,wednesday:k.openHours.wednesday,thursday:k.openHours.thursday,friday:k.openHours.friday,saturday:k.openHours.saturday,sunday:k.openHours.sunday}},console.log("addObject",a),e.next=7,Object(j.a)(a);case 7:e.sent.ok?q([{title:"Congrats!",description:"The "+k.name+" organization has been successfuly created",type:"success"}]):q([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 9:I(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=6,Object(u.a)([{content:x,type:"media"},{content:w,type:"icon"}],q,a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){P()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.g,{children:Object(m.jsx)(l.h,{children:Object(m.jsx)(l.U,{children:Object(m.jsxs)(l.l,{sm:"12",children:[Object(m.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Add new organization"}),Object(m.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(m.jsx)(l.v,{action:"",method:"organization",onSubmit:T,children:Object(m.jsx)(l.U,{children:Object(m.jsx)(l.l,{sm:"12",children:Object(m.jsxs)(l.g,{children:[Object(m.jsxs)(l.h,{children:[Object(m.jsxs)(l.w,{children:[Object(m.jsx)(l.K,{htmlFor:"name",children:"Organization Name"}),Object(m.jsx)(l.E,{type:"text",id:"name",required:!0,placeholder:"Enter Name...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{name:e.target.value}))},autoComplete:"name"})]}),Object(m.jsxs)(l.w,{row:!0,children:[Object(m.jsxs)(l.l,{sm:"4",children:[Object(m.jsx)(l.K,{htmlFor:"phone",children:"Phone Number:"}),Object(m.jsx)(l.E,{type:"number",id:"phone",placeholder:"Enter phone number...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{contact:Object(a.a)(Object(a.a)({},k.contact),{},{phone:e.target.value})}))},autoComplete:"phone"})]}),Object(m.jsxs)(l.l,{sm:"4",children:[Object(m.jsx)(l.K,{htmlFor:"email",children:"Email:"}),Object(m.jsx)(l.E,{type:"email",id:"email",placeholder:"Enter email...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{contact:Object(a.a)(Object(a.a)({},k.contact),{},{email:e.target.value})}))},autoComplete:"email"})]}),Object(m.jsxs)(l.l,{sm:"4",children:[Object(m.jsx)(l.K,{htmlFor:"website",children:"Website:"}),Object(m.jsx)(l.E,{type:"text",id:"website",placeholder:"Enter website...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{contact:Object(a.a)(Object(a.a)({},k.contact),{},{website:e.target.value})}))},autoComplete:"website"})]})]}),Object(m.jsxs)(l.w,{children:[Object(m.jsx)(l.K,{htmlFor:"name",children:"Address:"}),Object(m.jsx)(l.E,{type:"text",id:"address",required:!0,placeholder:"Enter address...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{contact:Object(a.a)(Object(a.a)({},k.contact),{},{address:e.target.value})}))},autoComplete:"address"})]}),Object(m.jsxs)(l.w,{row:!0,children:[Object(m.jsx)(l.K,{col:!0,md:"1",htmlFor:"file-input",children:"Image/Video"}),Object(m.jsx)(l.l,{xs:"12",md:"9",className:"ml-n3 mt-1",children:Object(m.jsx)(l.F,{id:"file-input",required:!0,name:"file-input",onChange:function(e){return y(e.target.files[0])}})})]}),Object(m.jsxs)(l.w,{row:!0,children:[Object(m.jsx)(l.K,{col:!0,md:"1",htmlFor:"icon",children:"Icon"}),Object(m.jsx)(l.l,{xs:"12",md:"9",className:"ml-n3 mt-1",children:Object(m.jsx)(l.F,{id:"icon",required:!0,name:"icon",onChange:function(e){return v(e.target.files[0])}})})]}),Object(m.jsxs)(l.w,{children:[Object(m.jsx)(l.K,{htmlFor:"select",children:"Category"}),Object(m.jsx)(l.l,{xs:"12",md:"3",children:Object(m.jsx)(l.V,{custom:!0,name:"category",className:"ml-n3",id:"category",required:!0,onChange:function(e){K(Object(a.a)(Object(a.a)({},k),{},{category:e.target.value}))},children:n.filter((function(e){return"organization"===e.type})).map((function(e){return Object(m.jsx)("option",{value:e._id,children:e.name},e._id)}))})})]}),Object(m.jsx)(l.w,{children:Object(m.jsx)(l.K,{className:"mt-4",htmlFor:"open-hours-monday",children:"Weekly open hours:"})}),Object(m.jsxs)(l.w,{row:!0,className:"border p-3 ml-1 mr-1 mb-5",children:[Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-monday",children:"Monday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-monday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{monday:e.target.value})}))},autoComplete:"monday"})]}),Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-tuesday",children:"Tuesday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-tuesday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{tuesday:e.target.value})}))},autoComplete:"tuesday"})]}),Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-wednesday",children:"Wednesday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-wednesday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{wednesday:e.target.value})}))},autoComplete:"wednesday"})]}),Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-thursday",children:"Thursday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-thursday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{thursday:e.target.value})}))},autoComplete:"thursday"})]}),Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-friday",children:"Friday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-friday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{friday:e.target.value})}))},autoComplete:"friday"})]}),Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-saturday",children:"Saturday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-saturday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{saturday:e.target.value})}))},autoComplete:"saturday"})]}),Object(m.jsxs)(l.l,{children:[Object(m.jsx)(l.K,{htmlFor:"open-hours-sunday",children:"Sunday"}),Object(m.jsx)(l.E,{type:"text",id:"open-hours-sunday",placeholder:"Enter open hours...",onInput:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{openHours:Object(a.a)(Object(a.a)({},k.openHours),{},{sunday:e.target.value})}))},autoComplete:"sunday"})]})]}),Object(m.jsxs)(l.w,{row:!0,children:[Object(m.jsx)(l.l,{tag:"label",sm:"3",className:"col-form-label mr-n5",children:"I want this organization to be visible:"}),Object(m.jsx)(l.l,{sm:"1",className:"ml-n4",children:Object(m.jsx)(l.gb,{onChange:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{isPublic:e.target.checked}))},className:"ml-n4 mt-1",color:"info",defaultChecked:!0})}),Object(m.jsx)(l.l,{tag:"label",sm:"3",className:"col-form-label",children:"Is this organization Indigenous:"}),Object(m.jsx)(l.l,{sm:"1",className:"ml-n5",children:Object(m.jsx)(l.gb,{onChange:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{isIndigenous:e.target.checked}))},className:"ml-n4 mt-1",color:"info"})}),Object(m.jsx)(l.l,{tag:"label",sm:"3",className:"col-form-label",children:"Is this organization Available at this moment:"}),Object(m.jsx)(l.l,{sm:"1",children:Object(m.jsx)(l.gb,{onChange:function(e){return K(Object(a.a)(Object(a.a)({},k),{},{isAvailable:e.target.checked}))},className:"ml-n4 mt-1",color:"info",defaultChecked:!0})})]}),Object(m.jsxs)(l.w,{children:[Object(m.jsx)(l.K,{htmlFor:"textarea-input",children:"Description"}),Object(m.jsx)(b.a,{apiKey:"1jrhxry4u21vyt133p3fetgz3s60eyigcj4zi629g6vczaia",initialValue:"",init:{height:500,menubar:!1,plugins:["advlist autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking table directionality","emoticons template paste textpattern imagetools codesample"],toolbar:"bold italic sizeselect fontselect fontsizeselect | hr alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | insertfile undo redo | forecolor backcolor emoticons | "},onEditorChange:function(e,t){K(Object(a.a)(Object(a.a)({},k),{},{description:e}))}})]})]}),Object(m.jsxs)(l.i,{className:"d-flex",children:[Object(m.jsx)(l.f,{type:"submit",size:"md",className:"btn btn-info",children:"Add Organization"})," ",Object(m.jsx)(l.L,{size:"sm",className:"btn btn-danger ml-2",children:"Cancel"}),H?Object(m.jsx)("div",{className:"w-25",children:Object(m.jsx)(l.eb,{className:"ml-2"})}):null]})]})})})}),S.map((function(e){return Object(m.jsx)(l.lb,{position:"bottom-right",children:Object(m.jsxs)(l.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(m.jsx)(l.kb,{closeButton:!0,children:e.title}),Object(m.jsx)(l.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+S.id)}))]})}}}]);
//# sourceMappingURL=28.24e8eea1.chunk.js.map