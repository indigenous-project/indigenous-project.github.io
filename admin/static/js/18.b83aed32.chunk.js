(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[18],{1155:function(e,t,n){"use strict";n.r(t);var r=n(58),c=n(619),a=n.n(c),s=n(620),o=n(156),i=n(1),l=n(621),u=n(624),d=n(628),j=n.n(d),h=n(623),p=n(1133),b=n(29),O=function(e){var t=e.Category,n=e.setCategory,c=e.setToastMessage,d=(e.toastMessages,e.loadCategoriesList),j=Object(i.useState)(!1),h=Object(o.a)(j,2),p=h[0],O=h[1],f=function(){var e=Object(s.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),O(!0),r={name:t.name,type:t.type},e.next=5,Object(u.c)(t._id,r,c);case 5:e.sent.ok?(d(),c([{title:"Congrats!",description:"The information of Category with id: "+t._id+" has been successfuly changed",type:"success"}])):c([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]),O(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.g,{children:Object(b.jsx)(l.h,{children:Object(b.jsx)(l.U,{children:Object(b.jsxs)(l.l,{sm:"12",children:[Object(b.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"ID: "+t._id}),Object(b.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(b.jsx)(l.v,{action:"",method:"post",onSubmit:f,children:Object(b.jsx)(l.U,{children:Object(b.jsx)(l.l,{sm:"12",children:Object(b.jsxs)(l.g,{children:[Object(b.jsxs)(l.h,{children:[Object(b.jsxs)(l.w,{children:[Object(b.jsx)(l.K,{htmlFor:"name",children:"Category Name"}),Object(b.jsx)(l.E,{type:"text",id:"name",placeholder:"Enter Name..",onInput:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{name:e.target.value}))},value:t.name?t.name:"",autoComplete:"name",required:!0})]}),Object(b.jsxs)(l.w,{row:!0,children:[Object(b.jsx)(l.l,{md:"12",children:Object(b.jsx)(l.K,{children:"Type"})}),Object(b.jsxs)(l.l,{md:"12",children:[Object(b.jsxs)(l.w,{variant:"checkbox",inline:!0,children:[Object(b.jsx)(l.J,{className:"form-check-input",id:"type-general",onChange:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{type:"general"}))},checked:"general"===t.type,name:"radios",value:"general",required:!0}),Object(b.jsx)(l.K,{variant:"checkbox",htmlFor:"type-general",children:"General"})]}),Object(b.jsxs)(l.w,{variant:"checkbox",inline:!0,children:[Object(b.jsx)(l.J,{className:"form-check-input",id:"type-organization",onChange:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{type:"organization"}))},checked:"organization"===t.type,name:"radios",value:"organization"}),Object(b.jsx)(l.K,{variant:"checkbox",htmlFor:"type-organization",children:"Organization"})]}),Object(b.jsx)(l.x,{className:"help-block",children:"Please specify the type of the Category"})]})]})]}),Object(b.jsxs)(l.i,{className:"d-flex",children:[Object(b.jsx)(l.f,{type:"submit",size:"md",className:"btn btn-info",children:"Apply Edit"})," ",Object(b.jsx)(l.L,{size:"sm",onClick:function(){return n({show:!t.show,type:t.type})},className:"btn btn-danger ml-2",children:"Cancel"}),p?Object(b.jsx)("div",{className:"w-25",children:Object(b.jsx)(l.eb,{className:"ml-2"})}):null]})]})})})})]})},f=function(e){return Object(b.jsx)(h.a,{content:p.a[e]})};t.default=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],d=Object(i.useState)({show:!1}),h=Object(o.a)(d,2),p=h[0],m=h[1],x=Object(i.useState)([]),g=Object(o.a)(x,2),y=g[0],w=g[1],v=Object(i.useState)(""),C=Object(o.a)(v,2),k=C[0],T=C[1],A=Object(i.useState)(!0),N=Object(o.a)(A,2),E=N[0],S=N[1],z=Object(i.useState)([]),L=Object(o.a)(z,2),D=L[0],q=L[1],I=function(){var e=Object(s.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,Object(u.d)();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent.data,console.log(n),c(n),J(k,n),S(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e,t){e=e.toLowerCase();var r=(t||n).filter((function(t){return t.name.toLowerCase().includes(e)||t.type.toLowerCase().includes(e)})).sort((function(e,t){return e.createdAt-t.createdAt})).reverse();w(r),T(e)},M=function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)(t,q);case 2:if(!(n=e.sent).ok){e.next=9;break}return q([{title:"Congrats!",description:"The Category with id: "+t+" has been successfuly deleted",type:"success"}]),e.next=7,I();case 7:e.next=10;break;case 9:q([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),m({show:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){I()}),[]);var P=[{name:Object(b.jsx)("strong",{children:"Icon"}),selector:"icon",cell:function(e){return e.icon?Object(b.jsx)(l.D,{style:{width:"30px"},src:e.icon}):"No Icon"}},{name:Object(b.jsx)("strong",{children:"Name"}),selector:"name",sortable:!0,left:!0},{name:Object(b.jsx)("strong",{children:"Type"}),selector:"type",sortable:!0,left:!0},{name:"",selector:"_id",cell:function(e){return"general"!==e.type?Object(b.jsxs)("div",{children:[Object(b.jsx)(l.L,{className:"card-header-action",onClick:function(){return m(Object(r.a)(Object(r.a)({},e),{},{show:!p.show,modalType:"edit"}))},children:f("cilPencil")}),Object(b.jsx)(l.L,{className:"card-header-action",onClick:function(){return m({id:e._id,name:e.name,show:!p.show,modalType:"delete"})},children:f("cilTrash")})]}):null}}];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.g,{children:Object(b.jsxs)(l.h,{children:[Object(b.jsx)(l.U,{children:Object(b.jsx)(l.l,{sm:"6"})}),Object(b.jsx)(l.U,{children:Object(b.jsxs)(l.l,{sm:"12",children:[Object(b.jsx)(l.E,{type:"text",id:"searchText",placeholder:"search by keyword ...",onInput:function(e){return J(e.target.value)}}),Object(b.jsx)(j.a,{title:"Categories List",columns:P,data:y,highlightOnHover:!0,pagination:!0,progressPending:E})]})})]})}),Object(b.jsxs)(l.O,{show:p.show,onClosed:function(){m({show:!1,type:p.modalType}),q([])},color:"delete"===p.modalType?"danger":"info",size:"",children:[Object(b.jsx)(l.R,{closeButton:!0,children:Object(b.jsx)(l.S,{children:"delete"===p.modalType?"Delete Category account":"edit"===p.modalType?"Edit Category profile":"Category info"})}),Object(b.jsxs)(l.P,{children:["delete"===p.modalType?Object(b.jsxs)("div",{children:["Are you sure you want to delete ",Object(b.jsx)("strong",{children:p.name})," category?"]}):null,"edit"===p.modalType?Object(b.jsx)(O,{loadCategoriesList:I,Category:p,setCategory:m,setToastMessage:q,toastMessages:D}):null]}),"delete"===p.modalType?Object(b.jsxs)(l.Q,{children:[Object(b.jsx)(l.f,{color:"danger",onClick:function(){return M(p.id)},children:"Yes"}),Object(b.jsx)(l.f,{color:"secondary",onClick:function(){return m({show:!p.show})},children:"Cancel"})]}):null]}),D.map((function(e){return Object(b.jsx)(l.lb,{position:"bottom-right",children:Object(b.jsxs)(l.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(b.jsx)(l.kb,{closeButton:!0,children:e.title}),Object(b.jsx)(l.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+D.id)}))]})}},624:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var r=n(619),c=n.n(r),a=n(620),s=n(622),o="Bearer "+localStorage.getItem("HDI-token"),i=function(){var e=Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(s.a)("CategoriesList"),{method:"GET",mode:"cors",headers:{Authorization:o,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(a.a)(c.a.mark((function e(t,n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(s.a)("CategoriesEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:o,Accept:"application/json"},body:JSON.stringify(n)}).then((function(e){return e})).catch((function(e){console.log(e),r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),u=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(s.a)("CategoriesDelete")+"/"+t,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:o,Accept:"application/json"}}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(s.a)("CategoriesAdd"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:o,Accept:"application/json"},body:JSON.stringify(t)}).then((function(e){return e})).catch((function(e){console.log(e),n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=18.b83aed32.chunk.js.map