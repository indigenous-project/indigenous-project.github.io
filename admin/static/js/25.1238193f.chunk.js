(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[25],{1149:function(e,t,n){"use strict";n.r(t);var c=n(58),r=n(619),s=n.n(r),i=n(620),a=n(156),l=n(1),o=n(621),d=n(654),j=n(628),u=n.n(j),b=n(623),h=n(1133),O=n(624),p=n(626),x=n(627),m=n(29),g=function(e){var t=e.event,n=e.setEvent,r=e.setToastMessage,j=(e.toastMessages,e.loadEventsList),u=Object(l.useState)([]),b=Object(a.a)(u,2),h=b[0],g=b[1],f=Object(l.useState)(!1),v=Object(a.a)(f,2),y=v[0],w=v[1],T=Object(l.useState)(),k=Object(a.a)(T,2),E=k[0],C=k[1],N=function(e){if(!e)return"";for(var t=[],n=e.length-1;n>=0;n--)t.unshift(["&#",e[n].charCodeAt(),";"].join(""));return t.join("")},P=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))},S=function(){var e=Object(i.a)(s.a.mark((function e(n){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),w(!0),c=function(){var e=Object(i.a)(s.a.mark((function e(n){var c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1===n){e.next=9;break}return c=t.date,i={title:t.title,location:t.location,price:t.price,startTime:5===t.startTime.length?c+" "+t.startTime:t.startTime,endTime:t.endTime?5===t.endTime.length?c+" "+t.endTime:t.endTime:"",date:t.date,description:N(P(t.description)),category:t.category,isPublic:t.isPublic?t.isPublic.toString():"true"},-2!==n&&(i.medias=[n]),console.log(i),e.next=7,Object(d.b)(t._id,i,r);case 7:e.sent.ok?(j(),r([{title:"Congrats!",description:"The information of event with id: "+t._id+" has been successfuly changed",type:"success"}])):r([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 9:w(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!E){e.next=8;break}return e.next=6,Object(x.b)(E,r,c);case 6:e.next=9;break;case 8:c(-2);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.d)();case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent.data,g(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){D()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(o.g,{children:Object(m.jsx)(o.h,{children:Object(m.jsx)(o.U,{children:Object(m.jsxs)(o.l,{sm:"12",children:[Object(m.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"ID: "+t._id}),Object(m.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(m.jsx)(o.v,{action:"",method:"event",onSubmit:S,children:Object(m.jsx)(o.U,{children:Object(m.jsx)(o.l,{sm:"12",children:Object(m.jsxs)(o.g,{children:[Object(m.jsxs)(o.h,{children:[Object(m.jsxs)(o.w,{children:[Object(m.jsx)(o.K,{htmlFor:"title",children:"Event Title"}),Object(m.jsx)(o.E,{type:"text",id:"title",required:!0,placeholder:"Enter title...",onInput:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{title:e.target.value}))},value:t.title,autoComplete:"name"})]}),Object(m.jsxs)(o.w,{row:!0,children:[Object(m.jsxs)(o.l,{sm:"4",children:[Object(m.jsx)(o.K,{htmlFor:"date",children:"Event Date"}),Object(m.jsx)(o.E,{type:"date",min:(new Date).toISOString().split("T")[0],id:"date",required:!0,placeholder:"Enter date...",onChange:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{date:e.target.value}))},value:t.date.split("T")[0]})]}),Object(m.jsxs)(o.l,{sm:"4",children:[Object(m.jsx)(o.K,{htmlFor:"startTime",children:"Start Time"}),Object(m.jsx)(o.E,{type:"time",id:"startTime",required:!0,placeholder:"Enter start time...",onChange:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{startTime:e.target.value}))},value:t.startTime?5!==t.startTime.length?t.startTime.split("T")[1].substring(0,5):t.startTime:""})]}),Object(m.jsxs)(o.l,{sm:"4",children:[Object(m.jsx)(o.K,{htmlFor:"endTime",children:"End Time"}),Object(m.jsx)(o.E,{type:"time",id:"endTime",placeholder:"Enter end time...",onChange:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{endTime:e.target.value}))},value:t.endTime?5!==t.endTime.length?t.endTime.split("T")[1].substring(0,5):t.endTime:""})]})]}),Object(m.jsxs)(o.w,{row:!0,children:[Object(m.jsx)(o.K,{col:!0,md:"2",htmlFor:"file-input",children:"Image/Video"}),Object(m.jsx)(o.l,{xs:"12",md:"9",className:"ml-n5 mt-1",children:Object(m.jsx)(o.F,{id:"file-input",name:"file-input",onChange:function(e){return C(e.target.files[0])}})})]}),Object(m.jsxs)(o.w,{row:!0,children:[Object(m.jsxs)(o.l,{xs:"12",sm:"3",children:[Object(m.jsx)(o.K,{htmlFor:"select",children:"Category"}),Object(m.jsx)(o.V,{custom:!0,name:"category",id:"category",required:!0,onChange:function(e){n(Object(c.a)(Object(c.a)({},t),{},{category:e.target.value}))},value:t.category?t.category._id:h[0]?h[0]._id:"",children:h.filter((function(e){return"general"===e.type})).map((function(e){return Object(m.jsx)("option",{value:e._id,children:e.name},e._id)}))})]}),Object(m.jsxs)(o.l,{xs:"12",sm:"3",children:[Object(m.jsx)(o.K,{htmlFor:"price",children:"Price"}),Object(m.jsx)(o.E,{type:"number",id:"price",required:!0,placeholder:"Enter price...",onInput:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{price:e.target.value}))},value:t.price,autoComplete:"price"})]}),Object(m.jsxs)(o.l,{xs:"12",sm:"3",children:[Object(m.jsx)(o.K,{htmlFor:"location",children:"Location"}),Object(m.jsx)(o.E,{type:"text",id:"location",required:!0,placeholder:"Enter the location...",onInput:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{location:e.target.value}))},value:t.location,autoComplete:"location"})]})]}),Object(m.jsxs)(o.w,{row:!0,children:[Object(m.jsx)(o.l,{tag:"label",sm:"3",className:"col-form-label",children:"I want to publish this event:"}),Object(m.jsx)(o.l,{sm:"1",className:"ml-n4",children:Object(m.jsx)(o.gb,{onChange:function(e){return n(Object(c.a)(Object(c.a)({},t),{},{isPublic:e.target.checked}))},className:"ml-n5 mt-1",color:"info",checked:!!t.isPublic})})]}),Object(m.jsxs)(o.w,{children:[Object(m.jsx)(o.K,{htmlFor:"textarea-input",children:"Description"}),Object(m.jsx)(p.a,{apiKey:"1jrhxry4u21vyt133p3fetgz3s60eyigcj4zi629g6vczaia",initialValue:P(t.description),init:{height:300,menubar:!1,plugins:["advlist autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking table directionality","emoticons template paste textpattern imagetools codesample"],toolbar:"bold italic sizeselect fontselect fontsizeselect | hr alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | insertfile undo redo | forecolor backcolor emoticons | "},onEditorChange:function(e,r){n(Object(c.a)(Object(c.a)({},t),{},{description:e}))}})]})]}),Object(m.jsxs)(o.i,{className:"d-flex",children:[Object(m.jsx)(o.f,{type:"submit",size:"md",className:"btn btn-info",children:"Edit Event"})," ",Object(m.jsx)(o.L,{size:"sm",className:"btn btn-danger ml-2",children:"Cancel"}),y?Object(m.jsx)("div",{className:"w-25",children:Object(m.jsx)(o.eb,{className:"ml-2"})}):null]})]})})})})]})},f=function(e){var t,n=e.event;return console.log("event: ",n),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(o.g,{children:Object(m.jsx)(o.h,{children:Object(m.jsx)(o.U,{children:Object(m.jsxs)(o.l,{sm:"12",children:[Object(m.jsxs)("h4",{id:"traffic",className:"card-title mb-0",children:["ID: ",n._id]}),Object(m.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),n?Object(m.jsxs)(o.U,{children:[Object(m.jsx)(o.l,{sm:"6",children:Object(m.jsxs)(o.M,{children:[Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Title: "}),n.title]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Category: "}),n.category?n.category.name:"no category specified"]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Author: "}),n.owner?n.owner.email:"no owner specified"]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Price: "}),n.price?n.price:"no price specified"]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Is this event visible for users: "}),Object(m.jsx)(o.b,{color:n.isPublic?"success":"danger",className:"ml-2 p-2",children:n.isPublic?"Yes":"No"})]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Event Date: "}),n.createdAt?n.createdAt.replace("T"," ").replace("Z",""):""]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Start time: "}),n.startTime?n.startTime.split("T")[1].substring(0,5):""]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"End time: "}),n.endTime?n.endTime.split("T")[1].substring(0,5):""]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"Last Update At: "}),n.updatedAt?n.updatedAt.replace("T"," ").replace("Z",""):""]})]})}),Object(m.jsxs)(o.l,{sm:"6",children:[Object(m.jsxs)(o.M,{children:[Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"#Going: "}),n.goingUsers.length]}),Object(m.jsxs)(o.N,{children:[Object(m.jsx)("strong",{children:"#Interested: "}),n.interestedUsers.length]})]}),n.medias.length>0?Object(m.jsx)(o.D,{style:{maxHeight:"300px",maxWidth:"100%",marginTop:"10px"},src:n.medias[0].path}):null]})]}):null,Object(m.jsxs)(o.g,{className:"mt-4",children:[Object(m.jsx)(o.k,{children:"Description:"}),Object(m.jsx)(o.h,{children:Object(m.jsx)(o.U,{children:Object(m.jsx)(o.l,{sm:"12",children:Object(m.jsx)(p.a,{apiKey:"1jrhxry4u21vyt133p3fetgz3s60eyigcj4zi629g6vczaia",initialValue:(t=n.description,t.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(t)}))),init:{height:300,menubar:!1,plugins:["advlist autolink lists link image charmap preview hr anchor pagebreak","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking table directionality","emoticons template paste textpattern imagetools codesample"],toolbar:""}})})})})]})]})},v=function(e){return Object(m.jsx)(b.a,{content:h.a[e]})};t.default=function(){var e=Object(l.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],j=Object(l.useState)({show:!1}),b=Object(a.a)(j,2),h=b[0],O=b[1],p=Object(l.useState)([]),x=Object(a.a)(p,2),y=x[0],w=x[1],T=Object(l.useState)(""),k=Object(a.a)(T,2),E=k[0],C=k[1],N=Object(l.useState)(!0),P=Object(a.a)(N,2),S=P[0],D=P[1],L=Object(l.useState)([]),A=Object(a.a)(L,2),F=A[0],I=A[1],z=function(){var e=Object(i.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,Object(d.c)();case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent.data,console.log(n),r(n),K(E,n),D(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e,t){e=e.toLowerCase();var c=(t||n).filter((function(t){return t.title.toLowerCase().includes(e)||t.host.toLowerCase().includes(e)||t.date.toLowerCase().includes(e)})).sort((function(e,t){return e.createdAt-t.createdAt})).reverse();w(c),C(e)},U=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(t,{isDeleted:"true"},I);case 2:if(!(n=e.sent).ok){e.next=9;break}return I([{title:"Congrats!",description:"The Event with id: "+t+" has been successfuly deleted",type:"success"}]),e.next=7,z();case 7:e.next=10;break;case 9:I([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),O({show:!1,type:"delete"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.b)(t,{isPublic:!h.isPublic+""},I);case 2:if(!(n=e.sent).ok){e.next=9;break}return I([{title:"Congrats!",description:"The publicity status of Event with id: "+t+" has been successfuly changed",type:"success"}]),e.next=7,z();case 7:e.next=10;break;case 9:I([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(n),O({show:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){z()}),[]);var M=[{name:Object(m.jsx)("strong",{children:"Title"}),selector:"title",sortable:!0,left:!0},{name:Object(m.jsx)("strong",{children:"Location"}),selector:"location",sortable:!0,left:!0},{name:Object(m.jsx)("strong",{children:"Host"}),selector:"host",sortable:!0,center:!0},{name:Object(m.jsx)("strong",{children:"Date"}),selector:"date",sortable:!0,center:!0,cell:function(e){return new Date(e.date).toLocaleDateString()}},{name:Object(m.jsx)("strong",{children:"Is Visible"}),selector:"isPublic",sortable:!0,center:!0,cell:function(e){return Object(m.jsx)(o.b,{color:e.isPublic?"success":"danger",className:"float-right",children:e.isPublic?"Yes":"No"})}},{name:"",selector:"_id",cell:function(e){return Object(m.jsxs)("div",{children:[Object(m.jsx)(o.L,{className:"card-header-action",onClick:function(){return O(Object(c.a)(Object(c.a)({},e),{},{show:!h.show,type:"detail"}))},children:v("cilInfo")}),Object(m.jsx)(o.L,{className:"card-header-action",onClick:function(){return O(Object(c.a)(Object(c.a)({},e),{},{show:!h.show,type:"edit"}))},children:v("cilPencil")}),Object(m.jsx)(o.L,{className:"card-header-action",onClick:function(){return O({id:e._id,title:e.title,isPublic:e.isPublic,show:!h.show,type:"isPublic"})},children:v("cilCloudUpload")}),Object(m.jsx)(o.L,{className:"card-header-action",onClick:function(){return O({id:e._id,title:e.title,show:!h.show,type:"delete"})},children:v("cilTrash")})]})}}];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(o.g,{children:Object(m.jsxs)(o.h,{children:[Object(m.jsx)(o.U,{children:Object(m.jsx)(o.l,{sm:"6"})}),Object(m.jsx)(o.U,{children:Object(m.jsxs)(o.l,{sm:"12",children:[Object(m.jsx)(o.E,{type:"text",id:"searchText",placeholder:"search by keyword ...",onInput:function(e){return K(e.target.value)}}),Object(m.jsx)(u.a,{title:"Events List",columns:M,data:y,highlightOnHover:!0,pagination:!0,progressPending:S})]})})]})}),Object(m.jsxs)(o.O,{show:h.show,onClosed:function(){O({show:!1,type:h.type}),I([])},color:"delete"===h.type?"danger":"isPublic"===h.type?"warning":"info",size:"edit"===h.type||"detail"===h.type?"xl":"",children:[Object(m.jsx)(o.R,{closeButton:!0,children:Object(m.jsx)(o.S,{children:"delete"===h.type?"Delete Event account":"edit"===h.type?"Edit Event profile":"detail"===h.type?"Event detail":"Change Publicity status"})}),h.show?Object(m.jsxs)(o.P,{children:["delete"===h.type?Object(m.jsxs)("div",{children:["Are you sure you want to delete ",Object(m.jsx)("strong",{children:h.title}),"?"]}):"isPublic"===h.type?Object(m.jsxs)("div",{children:["Are you sure you want to change publicity status of ",Object(m.jsx)("strong",{children:h.title}),"?"]}):null,"edit"===h.type?Object(m.jsx)(g,{loadEventsList:z,event:h,setEvent:O,setToastMessage:I,toastMessages:F}):"detail"===h.type?Object(m.jsx)(f,{event:h}):null]}):null,"delete"===h.type||"isPublic"===h.type?Object(m.jsxs)(o.Q,{children:[Object(m.jsx)(o.f,{color:"delete"===h.type?"danger":"warning",onClick:function(){return"delete"===h.type?U(h.id):_(h.id)},children:"Yes"}),Object(m.jsx)(o.f,{color:"secondary",onClick:function(){return O({show:!1})},children:"Cancel"})]}):null]}),F.map((function(e){return console.log(e),Object(m.jsx)(o.lb,{position:"bottom-right",children:Object(m.jsxs)(o.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(m.jsx)(o.kb,{closeButton:!0,children:e.title}),Object(m.jsx)(o.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+Math.floor(1e6*Math.random()))}))]})}}}]);
//# sourceMappingURL=25.1238193f.chunk.js.map