(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[34],{1146:function(e,t,c){"use strict";c.r(t);var s=c(58),n=c(619),r=c.n(n),i=c(620),a=c(156),l=c(1),o=c(621),j=c(622),d="Bearer "+localStorage.getItem("HDI-token"),h=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(j.a)("UsersList"),{method:"GET",mode:"cors",headers:{Authorization:d,Accept:"application/json"}}).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(i.a)(r.a.mark((function e(t,c,s){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Object(j.a)("UsersEdit")+"/"+t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json",Authorization:d,Accept:"application/json"},body:JSON.stringify(c)}).then((function(e){return e})).catch((function(e){console.log(e),s([{title:"Error!",description:"An error occured while processing the request",type:"danger"}])})));case 1:case"end":return e.stop()}}),e)})));return function(t,c,s){return e.apply(this,arguments)}}(),u=c(628),O=c.n(u),m=c(623),x=c(1133),f=c(29),p=function(e){var t=e.user,c=e.setUser,n=e.setToastMessage,j=(e.toastMessages,e.loadUsersList),d=Object(l.useState)(!1),h=Object(a.a)(d,2),u=h[0],O=h[1],m=function(){var e=Object(i.a)(r.a.mark((function e(c){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),O(!0),s={firstName:t.firstName,lastName:t.lastName,gender:t.gender,age:t.age,isActive:(!!t.isActive).toString(),isIndigenous:(!!t.isIndigenous).toString(),isAdmin:(!!t.isAdmin).toString()},e.next=5,b(t._id,s,n);case 5:e.sent.ok?(j(),n([{title:"Congrats!",description:"The information of user with id: "+t._id+" has been successfuly changed",type:"success"}])):n([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]),O(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.g,{children:Object(f.jsx)(o.h,{children:Object(f.jsx)(o.U,{children:Object(f.jsxs)(o.l,{sm:"12",children:[Object(f.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"ID: "+t._id}),Object(f.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(f.jsx)(o.v,{action:"",method:"post",children:Object(f.jsxs)(o.U,{children:[Object(f.jsx)(o.l,{sm:"6",children:Object(f.jsx)(o.g,{children:Object(f.jsxs)(o.h,{children:[Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"email",children:"Email"}),Object(f.jsx)(o.E,{type:"email",disabled:!0,id:"email",placeholder:"Enter Email..",value:t.email?t.email:"",autoComplete:"email"})]}),Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"firstName",children:"Firstname"}),Object(f.jsx)(o.E,{required:!0,type:"text",id:"firstName",placeholder:"Enter Firstname..",value:t.firstName?t.firstName:"",onInput:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{firstName:e.target.value}))},autoComplete:"firstname"}),Object(f.jsx)(o.x,{className:"help-block",children:"Please enter the firstname"})]}),Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"lastName",children:"Lastname"}),Object(f.jsx)(o.E,{required:!0,type:"text",id:"lastName",placeholder:"Enter Lastname..",value:t.lastName?t.lastName:"",onInput:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{lastName:e.target.value}))},autoComplete:"lastname"}),Object(f.jsx)(o.x,{className:"help-block",children:"Please enter the lastname"})]}),Object(f.jsxs)(o.w,{row:!0,children:[Object(f.jsx)(o.l,{md:"12",children:Object(f.jsx)(o.K,{children:"Gender"})}),Object(f.jsxs)(o.l,{md:"12",children:[Object(f.jsxs)(o.w,{variant:"checkbox",inline:!0,children:[Object(f.jsx)(o.J,{className:"form-check-input",id:"gender-male",onChange:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{gender:"male"}))},checked:"male"===t.gender,name:"radios",value:"male"}),Object(f.jsx)(o.K,{variant:"checkbox",htmlFor:"radio1",children:"Male"})]}),Object(f.jsxs)(o.w,{variant:"checkbox",inline:!0,children:[Object(f.jsx)(o.J,{className:"form-check-input",id:"radio2",onChange:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{gender:"female"}))},checked:"female"===t.gender,name:"radios",value:"female"}),Object(f.jsx)(o.K,{variant:"checkbox",htmlFor:"radio2",children:"Femail"})]}),Object(f.jsxs)(o.w,{variant:"checkbox",inline:!0,children:[Object(f.jsx)(o.J,{className:"form-check-input",id:"radio3",onChange:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{gender:"other"}))},checked:"other"===t.gender,name:"radios",value:"other"}),Object(f.jsx)(o.K,{variant:"checkbox",htmlFor:"radio3",children:"Other"})]}),Object(f.jsx)(o.x,{className:"help-block",children:"Please specify the gender of the user"})]})]})]})})}),Object(f.jsx)(o.l,{sm:"6",children:Object(f.jsxs)(o.g,{children:[Object(f.jsxs)(o.h,{children:[Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"age",children:"Age"}),Object(f.jsx)(o.E,{required:!0,type:"number",id:"age",min:"10",placeholder:"Enter Age...",value:t.age?t.age:"",onInput:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{age:e.target.value}))},autoComplete:"age"}),Object(f.jsx)(o.x,{className:"help-block",children:"Please enter the age"})]}),Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"isAdmin",className:"w-100",children:"Is this user an Admin?"}),Object(f.jsx)(o.gb,{className:"mr-1",color:"info",checked:!!t.isAdmin,onChange:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{isAdmin:e.target.checked}))},id:"isAdmin"})]}),Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"isActive",className:"w-100",children:"Account status: Active/Inactive"}),Object(f.jsx)(o.gb,{className:"mr-1",color:"info",checked:!!t.isActive,onChange:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{isActive:e.target.checked}))},id:"isActive"})]}),Object(f.jsxs)(o.w,{children:[Object(f.jsx)(o.K,{htmlFor:"isIndigenous",className:"w-100",children:"Is this account belong to an indigenous person?"}),Object(f.jsx)(o.gb,{className:"mr-1",color:"info",checked:!!t.isIndigenous,onChange:function(e){return c(Object(s.a)(Object(s.a)({},t),{},{isIndigenous:e.target.checked}))},id:"isIndigenous"})]})]}),Object(f.jsxs)(o.i,{className:"d-flex",children:[Object(f.jsx)(o.f,{onClick:m,size:"md",className:"btn btn-info",children:"Apply Edit"})," ",Object(f.jsx)(o.L,{size:"sm",onClick:function(){return c({show:!t.show,type:t.type})},className:"btn btn-danger ml-2",children:"Cancel"}),u?Object(f.jsx)("div",{className:"w-25",children:Object(f.jsx)(o.eb,{className:"ml-2"})}):null]})]})})]})})]})},g=function(e){var t=e.user;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.g,{children:Object(f.jsx)(o.h,{children:Object(f.jsx)(o.U,{children:Object(f.jsxs)(o.l,{sm:"12",children:[Object(f.jsxs)("h4",{id:"traffic",className:"card-title mb-0",children:["ID: ",t._id]}),Object(f.jsx)("div",{className:"small text-muted",children:(new Date).toDateString()})]})})})}),Object(f.jsx)(o.g,{children:Object(f.jsx)(o.h,{children:t?Object(f.jsxs)(o.U,{children:[Object(f.jsx)(o.l,{sm:"6",children:Object(f.jsxs)(o.M,{children:[Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Email: "}),t.email]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Full Name: "}),t.firstName+" "+t.lastName]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Gender: "}),t.gender?t.gender:"Not specified"]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Age: "}),t.age?t.age:"Not specified"]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Role: "}),Object(f.jsx)(o.b,{color:"info",className:"ml-2 p-2",children:t.isAdmin?"Admin":"Mobile User"})]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Is this account active: "}),Object(f.jsx)(o.b,{color:t.isActive?"success":"danger",className:"ml-2 p-2",children:t.isActive?"Yes":"No"})]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Is Indigenous: "}),Object(f.jsx)(o.b,{color:"info",className:"ml-2 p-2",children:t.isIndigenous?"Yes":"No"})]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Created At: "}),t.createdAt?t.createdAt.replace("T"," ").replace("Z",""):""]}),Object(f.jsxs)(o.N,{children:[Object(f.jsx)("strong",{children:"Last Update At: "}),t.updatedAt?t.updatedAt.replace("T"," ").replace("Z",""):""]})]})}),Object(f.jsxs)(o.l,{sm:"6",children:[Object(f.jsx)("h3",{className:"mb-4",children:"Login Logs"}),Object(f.jsx)(o.o,{items:t.loginLog,fields:[{key:"createdAt",label:"Date",_style:{width:"1%"}},{key:"isSuccess",label:"Status",_style:{width:"1%"}}],size:"",sorter:!0,itemsPerPage:5,pagination:!0,scopedSlots:{createdAt:function(e){return Object(f.jsx)("td",{children:e.createdAt.replace("T","----").replace("Z","")})},isSuccess:function(e){return Object(f.jsx)("td",{children:e.isSuccess?"Successful":"Failed"})}}})]})]}):null})})]})},N=function(e){return Object(f.jsx)(m.a,{content:x.a[e]})};t.default=function(){var e=Object(l.useState)([]),t=Object(a.a)(e,2),c=t[0],n=t[1],j=Object(l.useState)({show:!1}),d=Object(a.a)(j,2),u=d[0],m=d[1],x=Object(l.useState)([]),v=Object(a.a)(x,2),w=v[0],A=v[1],y=Object(l.useState)(""),k=Object(a.a)(y,2),C=k[0],I=k[1],E=Object(l.useState)(!0),S=Object(a.a)(E,2),F=S[0],L=S[1],U=Object(l.useState)([]),T=Object(a.a)(U,2),D=T[0],K=T[1],M=function(){var e=Object(i.a)(r.a.mark((function e(){var t,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,h();case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent.data,console.log(c),n(c),P(C,c),L(!1);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e,t){e=e.toLowerCase();var s=(t||c).filter((function(t){return t.email.toLowerCase().includes(e)||t.firstName.toLowerCase().includes(e)||t.lastName.toLowerCase().includes(e)})).sort((function(e,t){return e.createdAt-t.createdAt})).reverse();A(s),I(e)},_=function(){var e=Object(i.a)(r.a.mark((function e(t){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,{isDeleted:"true"});case 2:if(!(c=e.sent).ok){e.next=9;break}return K([{title:"Congrats!",description:"The user with id: "+t+" has been successfuly deleted",type:"success"}]),e.next=7,M();case 7:e.next=10;break;case 9:K([{title:"Error!",description:"An error occured while processing the request",type:"danger"}]);case 10:console.log(c),m({show:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){M()}),[]);var q=[{name:Object(f.jsx)("strong",{children:"Email"}),selector:"email",sortable:!0,left:!0},{name:Object(f.jsx)("strong",{children:"Full name"}),selector:"firstName",sortable:!0,left:!0,cell:function(e){return e.firstName+" "+e.lastName}},{name:Object(f.jsx)("strong",{children:"Gender"}),selector:"gender",sortable:!0,left:!0},{name:Object(f.jsx)("strong",{children:"Role"}),selector:"isAdmin",sortable:!0,cell:function(e){return Object(f.jsx)(o.b,{color:"info",className:"float-right",children:e.isAdmin?"Admin":"Mobile User"})}},{name:Object(f.jsx)("strong",{children:"Is Active"}),selector:"isActive",sortable:!0,center:!0,cell:function(e){return e.isActive?Object(f.jsx)(o.b,{color:"success",className:"float-right",children:"Active"}):Object(f.jsx)(o.b,{color:"danger",className:"float-right",children:"Not Active"})}},{name:"",selector:"_id",cell:function(e){return Object(f.jsxs)("div",{children:[Object(f.jsx)(o.L,{className:"card-header-action",onClick:function(){return m(Object(s.a)(Object(s.a)({},e),{},{show:!u.show,type:"detail"}))},children:N("cilInfo")}),Object(f.jsx)(o.L,{className:"card-header-action",onClick:function(){return m(Object(s.a)(Object(s.a)({},e),{},{show:!u.show,type:"edit"}))},children:N("cilPencil")}),Object(f.jsx)(o.L,{className:"card-header-action",onClick:function(){return m({id:e._id,email:e.email,show:!u.show,type:"delete"})},children:N("cilTrash")})]})}}];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(o.g,{children:Object(f.jsxs)(o.h,{children:[Object(f.jsx)(o.U,{children:Object(f.jsx)(o.l,{sm:"6"})}),Object(f.jsx)(o.U,{children:Object(f.jsxs)(o.l,{sm:"12",children:[Object(f.jsx)(o.E,{type:"text",id:"searchText",placeholder:"search by keyword ...",onInput:function(e){return P(e.target.value)}}),Object(f.jsx)(O.a,{title:"Users List",columns:q,data:w,highlightOnHover:!0,pagination:!0,progressPending:F})]})})]})}),Object(f.jsxs)(o.O,{show:u.show,onClosed:function(){m({show:!1,type:u.type}),K([])},color:"delete"===u.type?"danger":"info",size:"edit"===u.type||"detail"===u.type?"xl":"",children:[Object(f.jsx)(o.R,{closeButton:!0,children:Object(f.jsx)(o.S,{children:"delete"===u.type?"Delete user account":"edit"===u.type?"Edit user profile":"User info"})}),Object(f.jsxs)(o.P,{children:["delete"===u.type?Object(f.jsxs)("div",{children:["Are you sure you want to delete ",Object(f.jsx)("strong",{children:u.email})," user?"]}):null,"edit"===u.type?Object(f.jsx)(p,{loadUsersList:M,user:u,setUser:m,setToastMessage:K,toastMessages:D}):"detail"===u.type?Object(f.jsx)(g,{user:u}):null]}),"delete"===u.type?Object(f.jsxs)(o.Q,{children:[Object(f.jsx)(o.f,{color:"danger",onClick:function(){return _(u.id)},children:"Yes"}),Object(f.jsx)(o.f,{color:"secondary",onClick:function(){return m({show:!u.show})},children:"Cancel"})]}):null]}),D.map((function(e){return Object(f.jsx)(o.lb,{position:"bottom-right",children:Object(f.jsxs)(o.ib,{show:!0,autohide:3e3,fade:!0,color:e.type,children:[Object(f.jsx)(o.kb,{closeButton:!0,children:e.title}),Object(f.jsx)(o.jb,{children:e.description})]},Math.floor(1e6*Math.random()))},"toaster"+D.id)}))]})}}}]);
//# sourceMappingURL=34.35a946d0.chunk.js.map